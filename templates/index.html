<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Tâm Sự - Bạn Đồng Hành Của Bác</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Palette hiện đại - Professional Dashboard Theme */
            --bg-primary: #F8FAFC;
            --bg-secondary: #FFFFFF;
            --bg-card: linear-gradient(135deg, #FFFFFF 0%, #F1F5F9 100%);
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            --accent-primary: #0F766E;
            --accent-secondary: #14B8A6;
            --accent-tertiary: #5EEAD4;
            --accent-warm: #F59E0B;
            --accent-purple: #7C3AED;
            --accent-rose: #E11D48;
            --white: #FFFFFF;
            --navy-dark: #0F172A;
            --navy-medium: #1E293B;
            --teal-50: #F0FDFA;
            --teal-100: #CCFBF1;
            --teal-600: #0D9488;
            --teal-700: #0F766E;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --border-light: rgba(226, 232, 240, 0.8);
            --gradient-primary: linear-gradient(135deg, #0F766E 0%, #14B8A6 100%);
            --gradient-secondary: linear-gradient(135deg, #F59E0B 0%, #F97316 100%);
            --gradient-purple: linear-gradient(135deg, #7C3AED 0%, #A855F7 100%);
            --gradient-rose: linear-gradient(135deg, #E11D48 0%, #F43F5E 100%);
            --gradient-surface: linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%);
            --gradient-hero: linear-gradient(135deg, #0F766E 0%, #14B8A6 50%, #5EEAD4 100%);
            --sidebar-width: 280px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 15px;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Floating decorative elements */
        .floating-decoration {
            position: fixed;
            pointer-events: none;
            z-index: -1;
            color: var(--accent-tertiary);
            opacity: 0.08;
        }

        .floating-decoration.cherry-blossom {
            top: 10%;
            right: 5%;
            color: var(--accent-secondary);
            font-size: 2.5rem;
            animation: float-sakura 8s ease-in-out infinite;
        }

        .floating-decoration.lotus {
            bottom: 15%;
            left: 8%;
            color: var(--accent-primary);
            font-size: 2rem;
            animation: float-lotus 6s ease-in-out infinite;
        }

        .floating-decoration.bamboo {
            top: 50%;
            left: 2%;
            color: var(--accent-tertiary);
            font-size: 3rem;
            animation: sway 10s ease-in-out infinite;
        }

        @keyframes float-sakura {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-15px) rotate(5deg); opacity: 0.6; }
        }

        @keyframes float-lotus {
            0%, 100% { transform: translateY(0px) scale(1); opacity: 0.4; }
            50% { transform: translateY(-10px) scale(1.1); opacity: 0.7; }
        }

        @keyframes sway {
            0%, 100% { transform: translateX(0px) rotate(0deg); }
            25% { transform: translateX(5px) rotate(1deg); }
            75% { transform: translateX(-5px) rotate(-1deg); }
        }

        /* Layout Structure */
        .layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--gradient-surface);
            box-shadow: var(--shadow-xl);
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: transform 0.3s ease;
            border-right: 1px solid var(--border-light);
            backdrop-filter: blur(20px);
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            background: var(--gradient-hero);
            color: var(--white);
            text-align: center;
            position: relative;
        }

        .sidebar-header::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        }

        .sidebar-logo {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            letter-spacing: -0.01em;
        }

        .sidebar-subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .sidebar-nav {
            padding: 1.5rem 0;
        }

        .nav-item {
            padding: 0.875rem 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.875rem;
            font-size: 0.9rem;
        }

        .nav-item:hover {
            background: var(--teal-50);
            border-left-color: var(--accent-secondary);
            color: var(--accent-primary);
        }

        .nav-item.active {
            background: var(--teal-50);
            border-left-color: var(--accent-primary);
            color: var(--accent-primary);
            font-weight: 500;
        }

        .nav-icon {
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

        .sidebar-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: var(--bg-secondary);
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Header */
        .header {
            background: var(--gradient-surface);
            padding: 1.25rem 2rem;
            box-shadow: var(--shadow-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-light);
            backdrop-filter: blur(20px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sidebar-toggle {
            background: var(--gradient-primary);
            border: none;
            font-size: 1.3rem;
            color: var(--white);
            cursor: pointer;
            padding: 0.625rem;
            border-radius: 10px;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .sidebar-toggle:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .header-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .header-btn {
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            box-shadow: var(--shadow-sm);
        }

        .header-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .header-btn.secondary {
            background: var(--gradient-secondary);
        }

        /* Container */
        .container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Hero Section */
        .hero-section {
            background: var(--white);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }

        .hero-section::after {
            content: '🌸';
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 2.5rem;
            opacity: 0.08;
            animation: float-sakura 6s ease-in-out infinite;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-family: 'Inter', sans-serif;
            position: relative;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 560px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Welcome Message */
        .welcome-message {
            background: var(--gradient-hero);
            color: var(--white);
            padding: 2.5rem 2rem;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 2.5rem;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .welcome-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: -50%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .welcome-message .icon {
            font-size: 1.8rem;
            opacity: 0.3;
        }

        .welcome-text {
            font-size: 1.1rem;
            line-height: 1.6;
            font-weight: 500;
            letter-spacing: -0.01em;
        }

        /* Stats Dashboard */
        .stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            border-radius: 16px;
            padding: 1.75rem;
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.2s ease;
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            background: var(--gradient-primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            margin: 0 auto 1rem;
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-family: 'Inter', sans-serif;
            letter-spacing: -0.02em;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Features Section */
        .features-section {
            background: var(--white);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
        }

        .section-title {
            text-align: center;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-family: 'Inter', sans-serif;
            letter-spacing: -0.02em;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            max-width: 560px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            border: 1px solid var(--border-light);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.2s ease;
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
            border-color: var(--accent-secondary);
        }

        .feature-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            background: var(--gradient-primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            margin: 0 auto 1.25rem;
        }

        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.875rem;
            letter-spacing: -0.01em;
        }

        .feature-desc {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Topics Section */
        .topics-section {
            margin-bottom: 2rem;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .topic-card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
            position: relative;
            overflow: hidden;
        }

        .topic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.2s ease;
        }

        .topic-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(15, 118, 110, 0.02) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.2s ease;
        }

        .topic-card:hover::before {
            transform: scaleX(1);
        }

        .topic-card:hover::after {
            transform: scale(1);
        }

        .topic-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--accent-secondary);
        }

        .topic-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }

        .topic-icon {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            background: var(--gradient-primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
            letter-spacing: -0.01em;
        }

        .topic-desc {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .topic-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.875rem;
            padding-top: 1.25rem;
            border-top: 1px solid var(--border-light);
        }

        .topic-stat {
            text-align: center;
        }

        .topic-stat-number {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            display: block;
            letter-spacing: -0.01em;
        }

        .topic-stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
            font-weight: 500;
        }

        /* Control Panel */
        .control-panel {
            background: var(--white);
            border-radius: 16px;
            padding: 2.5rem 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
        }

        .control-title {
            text-align: center;
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .control-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 1.25rem;
        }

        .control-btn {
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.625rem;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .control-btn.secondary {
            background: var(--gradient-secondary);
        }

        .control-btn.secondary:hover {
            box-shadow: var(--shadow-md);
        }

        .control-btn i {
            font-size: 1.1rem;
        }

        /* Loading & Modal */
        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--white);
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: var(--shadow-2xl);
            z-index: 1000;
            border: 1px solid var(--border-light);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--bg-primary);
            border-top: 3px solid var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 1.1rem;
        }

        /* Footer */
        .footer {
            background: var(--gradient-surface);
            border-top: 1px solid var(--border-light);
            padding: 3rem 2rem 2rem;
            margin-top: 3rem;
            text-align: center;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }

        .footer-content {
            max-width: 720px;
            margin: 0 auto;
        }

        .footer-title {
            font-size: 1.6rem;
            font-weight: 700;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.25rem;
            letter-spacing: -0.01em;
        }

        .footer-text {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.7;
            font-size: 1rem;
        }

        .footer-decorations {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-bottom: 2.5rem;
        }

        .footer-decoration {
            font-size: 2.5rem;
            filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.2));
            animation: gentle-bounce 3s ease-in-out infinite;
        }

        .footer-decoration:nth-child(2) {
            animation-delay: 0.5s;
        }

        .footer-decoration:nth-child(3) {
            animation-delay: 1s;
        }

        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-light);
            padding-top: 1.5rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .hero-title {
                font-size: 2.25rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .hero-section,
            .features-section,
            .control-panel {
                padding: 2rem 1.5rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-dashboard {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .topic-card {
                padding: 2rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .header-title {
                font-size: 1.25rem;
            }
            
            .floating-decoration {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .stats-dashboard {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .control-buttons {
                grid-template-columns: 1fr;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-tertiary);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }
    </style>
</head>
<body>
    <!-- Floating decorations -->
    <div class="floating-decoration cherry-blossom">🌸</div>
    <div class="floating-decoration lotus">🪷</div>
    <div class="floating-decoration bamboo">🎋</div>
    
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">🌸</div>
                <div class="sidebar-title">Chatbot Tâm Sự</div>
                <div class="sidebar-subtitle">Bạn đồng hành</div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-item active" onclick="scrollToSection('hero')">
                    <i class="nav-icon fas fa-home"></i>
                    <span>Trang chủ</span>
                </div>
                <div class="nav-item" onclick="scrollToSection('features')">
                    <i class="nav-icon fas fa-star"></i>
                    <span>Tính năng</span>
                </div>
                <div class="nav-item" onclick="scrollToSection('topics')">
                    <i class="nav-icon fas fa-comments"></i>
                    <span>Chủ đề</span>
                </div>
                <div class="nav-item" onclick="scrollToSection('stats')">
                    <i class="nav-icon fas fa-chart-bar"></i>
                    <span>Thống kê</span>
                </div>
                <div class="nav-item" onclick="scrollToSection('control')">
                    <i class="nav-icon fas fa-cog"></i>
                    <span>Điều khiển</span>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <p>💝 Được tạo với tình yêu</p>
                <p>Dành cho người cao tuổi</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="sidebar-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="header-title">Chatbot Tâm Sự</h1>
                </div>
                <div class="header-actions">
                    <button class="header-btn" onclick="viewAllStats()">
                        <i class="fas fa-chart-line"></i>
                        Thống kê
                    </button>
                    <button class="header-btn secondary" onclick="showEmotionAnalysis()">
                        <i class="fas fa-heart"></i>
                        Cảm xúc
                    </button>
                </div>
            </header>

            <div class="container">
                <!-- Hero Section -->
                <section class="hero-section" id="hero">
                    <h1 class="hero-title">🌸 Chatbot Tâm Sự 🌸</h1>
                    <p class="hero-subtitle">Người bạn đồng hành thân thiết của bác - Luôn lắng nghe, chia sẻ và tâm sự cùng bác</p>
                </section>

                <!-- Welcome Message -->
                <section class="welcome-message">
                    <p class="welcome-text">
                        Chào mừng bác đến với không gian tâm sự ấm áp! 
                        Đây là nơi bác có thể chia sẻ những kỷ niệm, tâm tư và 
                        trò chuyện về những điều thân thuộc như quê hương, gia đình, sức khỏe...
                    </p>
                </section>

                <!-- Stats Dashboard -->
                <section class="stats-dashboard" id="stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="stat-number" id="totalChats">0</div>
                        <div class="stat-label">Cuộc trò chuyện</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-number" id="totalEmotions">0</div>
                        <div class="stat-label">Cảm xúc phân tích</div>
                    </div>
                </section>

                <!-- Features Section -->
                <section class="features-section" id="features">
                    <h2 class="section-title">💎 Tính Năng Đặc Biệt</h2>
                    <p class="section-subtitle">Công nghệ AI tiên tiến kết hợp với sự thấu hiểu sâu sắc về tâm lý người cao tuổi</p>
                    
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3 class="feature-title">Nhận Diện Cảm Xúc</h3>
                            <p class="feature-desc">AI thông minh có thể hiểu và phân tích cảm xúc của bác để phản hồi phù hợp nhất</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-map-marked-alt"></i>
                            </div>
                            <h3 class="feature-title">Giọng Vùng Miền</h3>
                            <p class="feature-desc">Trò chuyện theo giọng quê hương của bác, tạo cảm giác thân quen và gần gũi</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 class="feature-title">Nhớ Lịch Sử</h3>
                            <p class="feature-desc">Ghi nhớ những cuộc trò chuyện trước để hiểu bác hơn và tâm sự sâu sắc hơn</p>
                        </div>
                    </div>
                </section>

                <!-- Topics Section -->
                <section class="topics-section" id="topics">
                    <h2 class="section-title">🌺 Chủ Đề Tâm Sự</h2>
                    
                    <div class="topics-grid">
                        <a href="/chat/que_huong" class="topic-card">
                            <div class="topic-header">
                                <div class="topic-icon">🏠</div>
                                <h3 class="topic-title">Quê Hương & Hoài Niệm</h3>
                            </div>
                            <p class="topic-desc">Chia sẻ về quê hương, món ăn dân dã, ca dao tục ngữ và những kỷ niệm tuổi thơ đẹp đẽ</p>
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="messages-que_huong">0</span>
                                    <div class="topic-stat-label">Tin nhắn</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="emotions-que_huong">0</span>
                                    <div class="topic-stat-label">Cảm xúc</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="status-que_huong">Sẵn sàng</span>
                                    <div class="topic-stat-label">Trạng thái</div>
                                </div>
                            </div>
                        </a>

                        <a href="/chat/gia_dinh" class="topic-card">
                            <div class="topic-header">
                                <div class="topic-icon">👨‍👩‍👧‍👦</div>
                                <h3 class="topic-title">Gia Đình & Tình Thân</h3>
                            </div>
                            <p class="topic-desc">Tâm sự về con cháu, gia đình, cách giữ liên lạc và truyền đạt văn hóa Việt</p>
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="messages-gia_dinh">0</span>
                                    <div class="topic-stat-label">Tin nhắn</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="emotions-gia_dinh">0</span>
                                    <div class="topic-stat-label">Cảm xúc</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="status-gia_dinh">Sẵn sàng</span>
                                    <div class="topic-stat-label">Trạng thái</div>
                                </div>
                            </div>
                        </a>

                        <a href="/chat/suc_khoe" class="topic-card">
                            <div class="topic-header">
                                <div class="topic-icon">💊</div>
                                <h3 class="topic-title">Sức Khỏe & Chăm Sóc</h3>
                            </div>
                            <p class="topic-desc">Tư vấn sức khỏe, thuốc nam, bài tập dành cho người cao tuổi và cách sống khỏe</p>
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="messages-suc_khoe">0</span>
                                    <div class="topic-stat-label">Tin nhắn</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="emotions-suc_khoe">0</span>
                                    <div class="topic-stat-label">Cảm xúc</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="status-suc_khoe">Sẵn sàng</span>
                                    <div class="topic-stat-label">Trạng thái</div>
                                </div>
                            </div>
                        </a>

                        <a href="/chat/lich_su" class="topic-card">
                            <div class="topic-header">
                                <div class="topic-icon">📚</div>
                                <h3 class="topic-title">Lịch Sử & Văn Hóa</h3>
                            </div>
                            <p class="topic-desc">Kể chuyện lịch sử Việt Nam, các nhân vật nổi tiếng và truyền thống văn hóa</p>
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="messages-lich_su">0</span>
                                    <div class="topic-stat-label">Tin nhắn</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="emotions-lich_su">0</span>
                                    <div class="topic-stat-label">Cảm xúc</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="status-lich_su">Sẵn sàng</span>
                                    <div class="topic-stat-label">Trạng thái</div>
                                </div>
                            </div>
                        </a>

                        <a href="/chat/tam_linh" class="topic-card">
                            <div class="topic-header">
                                <div class="topic-icon">🙏</div>
                                <h3 class="topic-title">Tâm Linh & Triết Lý</h3>
                            </div>
                            <p class="topic-desc">Thảo luận về đạo Phật, phong thủy, tín ngưỡng và triết lý sống an nhiên</p>
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="messages-tam_linh">0</span>
                                    <div class="topic-stat-label">Tin nhắn</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="emotions-tam_linh">0</span>
                                    <div class="topic-stat-label">Cảm xúc</div>
                                </div>
                                <div class="topic-stat">
                                    <span class="topic-stat-number" id="status-tam_linh">Sẵn sàng</span>
                                    <div class="topic-stat-label">Trạng thái</div>
                                </div>
                            </div>
                        </a>
                    </div>
                </section>

                <!-- Control Panel -->
                <section class="control-panel" id="control">
                    <h2 class="control-title">🎛️ Bảng Điều Khiển</h2>
                    <div class="control-buttons">
                        <button class="control-btn" onclick="viewAllStats()">
                            <i class="fas fa-chart-bar"></i>
                            Xem Thống Kê Chi Tiết
                        </button>
                        <button class="control-btn secondary" onclick="showEmotionAnalysis()">
                            <i class="fas fa-brain"></i>
                            Phân Tích Cảm Xúc
                        </button>
                        <button class="control-btn" onclick="exportAllData()">
                            <i class="fas fa-download"></i>
                            Xuất Dữ Liệu
                        </button>
                        <button class="control-btn secondary" onclick="resetAllSessions()">
                            <i class="fas fa-sync-alt"></i>
                            Làm Mới Phiên
                        </button>
                    </div>
                </section>

                <!-- Loading -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Đang xử lý...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3 class="footer-title">💝 Chatbot Tâm Sự</h3>
            <p class="footer-text">
                Được thiết kế đặc biệt dành cho người cao tuổi với tình yêu và sự tôn trọng. 
                Mỗi cuộc trò chuyện đều được lưu giữ cẩn thận để hiểu bác tốt hơn.
            </p>
            <div class="footer-decorations">
                <span class="footer-decoration">🌸</span>
                <span class="footer-decoration">🪷</span>
                <span class="footer-decoration">🌺</span>
            </div>
            <div class="footer-copyright">
                <p>© 2025 Chatbot Tâm Sự - Bạn đồng hành thân thiết của bác</p>
            </div>
        </div>
    </footer>

    <!-- Modal for Stats -->
    <div id="statsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 20px; padding: 40px; max-width: 800px; width: 90%; max-height: 80%; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2 style="color: #333333; font-size: 1.8rem;">📊 Thống Kê Chi Tiết</h2>
                <button onclick="closeModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666666;">✕</button>
            </div>
            <div id="statsContent">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Đang tải dữ liệu...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (window.innerWidth <= 1024) {
                sidebar.classList.toggle('show');
            } else {
                sidebar.classList.toggle('hidden');
                mainContent.classList.toggle('expanded');
            }
        }

        // Smooth scrolling to sections
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.target.closest('.nav-item').classList.add('active');
            }
        }

        // Responsive sidebar handling
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (window.innerWidth > 1024) {
                sidebar.classList.remove('show');
                if (sidebar.classList.contains('hidden')) {
                    mainContent.classList.add('expanded');
                } else {
                    mainContent.classList.remove('expanded');
                }
            } else {
                sidebar.classList.remove('hidden');
                mainContent.classList.remove('expanded');
            }
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            
            if (window.innerWidth <= 1024 && 
                !sidebar.contains(event.target) && 
                !sidebarToggle.contains(event.target) &&
                sidebar.classList.contains('show')) {
                sidebar.classList.remove('show');
            }
        });
        document.addEventListener('DOMContentLoaded', function() {
            loadTopicStats();
            updateGlobalStats();
        });

        // Load stats for each topic
        async function loadTopicStats() {
            const topics = ['que_huong', 'gia_dinh', 'suc_khoe', 'lich_su', 'tam_linh'];
            
            for (const topic of topics) {
                try {
                    const response = await fetch(`/api/topic_stats/${topic}`);
                    const data = await response.json();
                    
                    if (data) {
                        document.getElementById(`messages-${topic}`).textContent = data.total_conversations || 0;
                        
                        // Load emotion stats
                        const emotionResponse = await fetch(`/api/emotion_stats/${topic}`);
                        const emotionData = await emotionResponse.json();
                        if (emotionData.success) {
                            document.getElementById(`emotions-${topic}`).textContent = emotionData.total_messages || 0;
                        }
                        
                        document.getElementById(`status-${topic}`).textContent = data.session_active ? 'Đang hoạt động' : 'Sẵn sàng';
                    }
                } catch (error) {
                    console.error(`Error loading stats for ${topic}:`, error);
                }
            }
        }

        // Update global stats
        async function updateGlobalStats() {
            try {
                const response = await fetch('/api/all_stats');
                const data = await response.json();
                
                let totalChats = 0;
                let totalEmotions = 0;
                
                for (const [topic, stats] of Object.entries(data)) {
                    totalChats += stats.total_conversations || 0;
                    
                    // Get emotion data
                    try {
                        const emotionResponse = await fetch(`/api/emotion_stats/${topic}`);
                        const emotionData = await emotionResponse.json();
                        if (emotionData.success) {
                            totalEmotions += emotionData.total_messages || 0;
                        }
                    } catch (e) {
                        console.error(`Error loading emotion stats for ${topic}:`, e);
                    }
                }
                
                document.getElementById('totalChats').textContent = totalChats;
                document.getElementById('totalEmotions').textContent = totalEmotions;
                
                // Animate numbers
                animateNumber('totalChats', totalChats);
                animateNumber('totalEmotions', totalEmotions);
                
            } catch (error) {
                console.error('Error loading global stats:', error);
            }
        }

        // Animate number counting
        function animateNumber(elementId, targetNumber) {
            const element = document.getElementById(elementId);
            const duration = 2000; // 2 seconds
            const increment = targetNumber / (duration / 16); // 60 FPS
            let currentNumber = 0;
            
            const timer = setInterval(() => {
                currentNumber += increment;
                if (currentNumber >= targetNumber) {
                    element.textContent = targetNumber;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(currentNumber);
                }
            }, 16);
        }

        // View all statistics
        async function viewAllStats() {
            document.getElementById('statsModal').style.display = 'flex';
            
            try {
                const response = await fetch('/api/all_stats');
                const data = await response.json();
                
                let statsHTML = '<div style="display: grid; gap: 20px;">';
                
                const topicNames = {
                    'que_huong': '🏠 Quê hương và hoài niệm',
                    'gia_dinh': '👨‍👩‍👧‍👦 Gia đình',
                    'suc_khoe': '💊 Sức khỏe',
                    'lich_su': '📚 Lịch sử',
                    'tam_linh': '🙏 Tâm linh'
                };
                
                for (const [topic, stats] of Object.entries(data)) {
                    // Get emotion data
                    let emotionHTML = '<p style="color: #666666;">Chưa có dữ liệu cảm xúc</p>';
                    try {
                        const emotionResponse = await fetch(`/api/emotion_stats/${topic}`);
                        const emotionData = await emotionResponse.json();
                        if (emotionData.success && emotionData.emotion_distribution) {
                            emotionHTML = '<div style="display: flex; gap: 10px; flex-wrap: wrap;">';
                            for (const [emotion, count] of Object.entries(emotionData.emotion_distribution)) {
                                const emotionIcons = {
                                    'buồn': '😢',
                                    'vui': '😊',
                                    'nhớ_quê': '🏡',
                                    'lo_lắng': '😰',
                                    'bệnh_tật': '🤒',
                                    'gia_đình': '👨‍👩‍👧‍👦'
                                };
                                emotionHTML += `<span style="background: #F5F5F5; padding: 5px 10px; border-radius: 15px; font-size: 0.9rem;">${emotionIcons[emotion] || '😐'} ${emotion}: ${count}</span>`;
                            }
                            emotionHTML += '</div>';
                        }
                    } catch (e) {
                        console.error(`Error loading emotion stats for ${topic}:`, e);
                    }
                    
                    statsHTML += `
                        <div style="background: #F5F5F5; padding: 20px; border-radius: 15px; border-left: 4px solid #A7C7E7;">
                            <h3 style="color: #333333; margin-bottom: 15px;">${topicNames[topic] || topic}</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 15px;">
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #333333;">${stats.total_conversations}</div>
                                    <div style="font-size: 0.9rem; color: #666666;">Cuộc trò chuyện</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #B2D8B2;">${stats.summarized_conversations}</div>
                                    <div style="font-size: 0.9rem; color: #666666;">Đã tóm tắt</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #FFCBA4;">${stats.current_messages}</div>
                                    <div style="font-size: 0.9rem; color: #666666;">Tin nhắn hiện tại</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: ${stats.session_active ? '#B2D8B2' : '#666666'};">${stats.session_active ? '🟢 Hoạt động' : '⚪ Chờ'}</div>
                                    <div style="font-size: 0.9rem; color: #666666;">Trạng thái</div>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #333333; margin-bottom: 10px;">📊 Phân tích cảm xúc:</h4>
                                ${emotionHTML}
                            </div>
                        </div>
                    `;
                }
                
                statsHTML += '</div>';
                document.getElementById('statsContent').innerHTML = statsHTML;
                
            } catch (error) {
                document.getElementById('statsContent').innerHTML = '<p style="color: #333333; text-align: center;">Lỗi khi tải dữ liệu thống kê</p>';
                console.error('Error loading detailed stats:', error);
            }
        }

        // Export all data
        async function exportAllData() {
            showLoading(true);
            try {
                const topics = ['que_huong', 'gia_dinh', 'suc_khoe', 'lich_su', 'tam_linh'];
                const exportData = {};
                
                for (const topic of topics) {
                    const response = await fetch(`/api/export_topic/${topic}`);
                    const data = await response.json();
                    exportData[topic] = data;
                }
                
                // Create and download file
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `chatbot_data_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                alert('✅ Dữ liệu đã được xuất thành công!');
            } catch (error) {
                alert('❌ Lỗi khi xuất dữ liệu: ' + error.message);
            }
            showLoading(false);
        }

        // Show emotion analysis
        async function showEmotionAnalysis() {
            document.getElementById('statsModal').style.display = 'flex';
            document.getElementById('statsContent').innerHTML = '<div class="loading"><div class="spinner"></div><p>Đang phân tích cảm xúc...</p></div>';
            
            try {
                const topics = ['que_huong', 'gia_dinh', 'suc_khoe', 'lich_su', 'tam_linh'];
                let analysisHTML = '<h3 style="color: #333333; margin-bottom: 20px;">🧠 Phân Tích Cảm Xúc Chi Tiết</h3>';
                
                const emotionColors = {
                    'buồn': '#FFD1DC',
                    'vui': '#FFCBA4',
                    'nhớ_quê': '#A7C7E7',
                    'lo_lắng': '#B2D8B2',
                    'bệnh_tật': '#EDE4D8',
                    'gia_đình': '#B2D8B2'
                };
                
                const emotionIcons = {
                    'buồn': '😢',
                    'vui': '😊',
                    'nhớ_quê': '🏡',
                    'lo_lắng': '😰',
                    'bệnh_tật': '🤒',
                    'gia_đình': '👨‍👩‍👧‍👦'
                };
                
                let totalEmotions = {};
                
                for (const topic of topics) {
                    const response = await fetch(`/api/emotion_stats/${topic}`);
                    const data = await response.json();
                    
                    if (data.success && data.emotion_distribution) {
                        for (const [emotion, count] of Object.entries(data.emotion_distribution)) {
                            totalEmotions[emotion] = (totalEmotions[emotion] || 0) + count;
                        }
                    }
                }
                
                // Create emotion chart
                analysisHTML += '<div style="background: #F5F5F5; padding: 20px; border-radius: 15px; margin-bottom: 20px;">';
                analysisHTML += '<h4 style="margin-bottom: 15px;">📈 Tổng quan cảm xúc:</h4>';
                
                if (Object.keys(totalEmotions).length > 0) {
                    const maxCount = Math.max(...Object.values(totalEmotions));
                    for (const [emotion, count] of Object.entries(totalEmotions)) {
                        const percentage = (count / maxCount) * 100;
                        analysisHTML += `
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>${emotionIcons[emotion] || '😐'} ${emotion}</span>
                                    <span style="font-weight: bold;">${count}</span>
                                </div>
                                <div style="background: #EDE4D8; border-radius: 10px; height: 8px;">
                                    <div style="background: ${emotionColors[emotion] || '#A7C7E7'}; width: ${percentage}%; height: 100%; border-radius: 10px; transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                        `;
                    }
                } else {
                    analysisHTML += '<p style="color: #666666; text-align: center;">Chưa có dữ liệu cảm xúc để phân tích</p>';
                }
                
                analysisHTML += '</div>';
                
                // Add insights
                if (Object.keys(totalEmotions).length > 0) {
                    const mostCommonEmotion = Object.entries(totalEmotions).reduce((a, b) => totalEmotions[a[0]] > totalEmotions[b[0]] ? a : b)[0];
                    analysisHTML += `
                        <div style="background: linear-gradient(135deg, #A7C7E7 0%, #B2D8B2 100%); color: white; padding: 20px; border-radius: 15px;">
                            <h4 style="margin-bottom: 15px;">💡 Nhận xét:</h4>
                            <p>Cảm xúc phổ biến nhất: <strong>${emotionIcons[mostCommonEmotion] || '😐'} ${mostCommonEmotion}</strong></p>
                            <p style="margin-top: 10px; opacity: 0.9;">Hệ thống đã phân tích tổng cộng <strong>${Object.values(totalEmotions).reduce((a, b) => a + b, 0)}</strong> cảm xúc từ các cuộc trò chuyện.</p>
                        </div>
                    `;
                }
                
                document.getElementById('statsContent').innerHTML = analysisHTML;
                
            } catch (error) {
                document.getElementById('statsContent').innerHTML = '<p style="color: #333333; text-align: center;">Lỗi khi phân tích cảm xúc</p>';
                console.error('Error loading emotion analysis:', error);
            }
        }

        // Reset all sessions
        async function resetAllSessions() {
            if (confirm('🔄 Bạn có chắc muốn làm mới tất cả phiên trò chuyện? Dữ liệu sẽ được lưu trữ nhưng phiên hiện tại sẽ được reset.')) {
                showLoading(true);
                try {
                    const response = await fetch('/api/reset_session', { method: 'POST' });
                    const data = await response.json();
                    
                    if (data.success) {
                        alert('✅ Đã làm mới tất cả phiên thành công!');
                        location.reload();
                    } else {
                        alert('❌ Lỗi: ' + data.error);
                    }
                } catch (error) {
                    alert('❌ Lỗi khi làm mới phiên: ' + error.message);
                }
                showLoading(false);
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('statsModal').style.display = 'none';
        }

        // Show/hide loading
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        // Auto refresh stats every 30 seconds
        setInterval(() => {
            loadTopicStats();
            updateGlobalStats();
        }, 30000);

        // Close modal when clicking outside
        document.getElementById('statsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
